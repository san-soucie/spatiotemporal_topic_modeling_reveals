stages:
  process_data:
    cmd: python src/data_processing/process_data.py
    deps:
    - data/raw
    - src/data_processing/process_data.py
    outs:
    - data/processed/classcount.json
    - data/processed/data.json
    - data/processed/meta_data.json
    - data/processed/observations.csv
  nmds:
    cmd: python src/data_processing/nmds.py
    deps:
    - data/processed/data.json
    - data/processed/meta_data.json
    - src/data_processing/nmds.py
    outs:
    - data/model/nmds.json
    params:
    - nmds.random_seed
  rost:
    cmd: python src/data_processing/rost.py
    deps:
    - data/processed/observations.csv
    - data/processed/meta_data.json
    - src/data_processing/rost.py
    - data/preserved_rost_output/rost_topic_prob.json
    - data/preserved_rost_output/rost_wt_matrix.json
    - data/preserved_rost_output/rost_word_prob.json
    outs:
    - data/model/rost_topic_prob.json
    - data/model/rost_wt_matrix.json
    - data/model/rost_word_prob.json
    params:
    - rost.epochs
    - rost.k
    - rost.alpha
    - rost.beta
    - rost.overwrite
    - rost.copy_preserved_data
  figure1:
    cmd: python src/outputs/figure1.py
    deps:
    - data/processed/meta_data.json
    - data/raw/altitude.csv
    - data/raw/sst.csv
    - data/raw/ec.csv
    - src/outputs/figure1.py
    outs:
    - output/figure1.eps
    params:
    - figures.page_width
    - figures.page_height
    - figures.dpi
  figure3:
    cmd: python src/outputs/figure3.py
    deps:
      - data/processed/meta_data.json
      - data/model/nmds.json
      - src/outputs/figure3.py
    outs:
      - output/figure3.eps
    params:
      - figures.page_width
      - figures.page_height
      - figures.dpi
